<app-loadable [loadable]="optimization$ | async" class="root__container">
  <div
    fxLayout="column"
    fxLayoutAlign="center center"
    fxLayoutGap="2rem"
    class="page__container"
  >
    <h1>{{ (optimization$ | async).name }} Results</h1>

    <mat-card fxFlex>{{ (optimization$ | async).description }}</mat-card>

    <div fxFlex [fxLayout]="layoutType" fxLayoutGap="2rem">
      <mat-card fxFlex>
        <app-loadable [loadable]="objectiveFunction$ | async">
          <app-plotly
            [data]="objectiveFunction$ | async"
            [showLegend]="false"
            [subplotWidth]="475"
            [subplotHeight]="400"
            [showXTicks]="true"
            [showYTicks]="true"
            [style]="{ position: 'relative', width: '100%', height: '100%' }"
          ></app-plotly>
        </app-loadable>
      </mat-card>
      <mat-card fxFlex>
        <app-loadable [loadable]="iterationRMSE$ | async">
          <mat-form-field>
            <mat-select placeholder="Select a property type" [(value)]="propertyType">
              <mat-option
                *ngFor="let pair of (iterationRMSE$ | async).plotData | keyvalue"
                [value]="pair.key"
              >
                {{ pair.key }}
              </mat-option>
            </mat-select>
          </mat-form-field>
          <div *ngIf="propertyType">
            <app-plotly
              [data]="(iterationRMSE$ | async).plotData[propertyType]"
              [showLegend]="true"
              [subplotWidth]="600"
              [subplotHeight]="400"
              [showXTicks]="true"
              [showYTicks]="true"
              [legendOrientation]="'v'"
              [style]="{ position: 'relative', width: '100%', height: '100%' }"
            ></app-plotly>
          </div>
        </app-loadable>
      </mat-card>
    </div>
  </div>
</app-loadable>
